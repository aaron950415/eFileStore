(this.webpackJsonpepic=this.webpackJsonpepic||[]).push([[2],{105:function(e,t,n){},123:function(e,t,n){"use strict";n.r(t);var r,i,o,a,c,s,u=n(0),l=n(23),p=n.n(l),b=(n(105),n(9)),f=n(31),j=n.p+"static/media/logo.6ce24c58.svg",O=n(45),h=n(32),y=n(124),g=n(77),d=n(83),m=n(5),v=h.a.header(r||(r=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  padding: 10px 100px;\n  background-color: #02101f;\n  color: #fff;\n"]))),w=h.a.img(i||(i=Object(f.a)(["\n  height: 30px;\n"]))),x=Object(h.a)(O.b)(o||(o=Object(f.a)(["\n  color: #fff;\n  margin-left: 30px;\n\n  &.active {\n    border-bottom: 1px solid #fff;\n  }\n"]))),U=h.a.div(a||(a=Object(f.a)(["\n  margin-left: auto;\n"]))),P=Object(h.a)(y.a)(c||(c=Object(f.a)(["\n  margin-left: 10px;\n"]))),k=Object(d.a)((function(){var e=Object(g.a)(),t=e.UserStore,n=e.AuthStore,r=Object(b.f)();return Object(m.jsxs)(v,{children:[Object(m.jsx)(w,{src:j}),Object(m.jsxs)("nav",{children:[Object(m.jsx)(x,{to:"/",activeClassName:"active",exact:!0,children:"Home page"}),Object(m.jsx)(x,{to:"/history",activeClassName:"active",children:"Upload history"}),Object(m.jsx)(x,{to:"/about",activeClassName:"active",children:"About me"})]}),Object(m.jsx)(U,{children:t.currentUser?Object(m.jsxs)(m.Fragment,{children:[t.currentUser.attributes.username,Object(m.jsx)(P,{type:"primary",onClick:function(){n.logout(),r.push("/login")},children:"Logout"})]}):Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(P,{type:"primary",onClick:function(){r.push("/login")},children:"Login"}),Object(m.jsx)(P,{type:"primary",onClick:function(){r.push("/register")},children:"Register"})]})})]})})),F=h.a.footer(s||(s=Object(f.a)(["\n  padding: 10px 100px;\n  text-align: center;\n  font-size: 12px;\n  color: #aaa;\n"])));var L=function(){return Object(m.jsx)(F,{children:Object(m.jsx)("p",{children:"Footer"})})};var z=function(){return Object(m.jsx)("div",{children:"Loading"})},D=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(6),n.e(9)]).then(n.bind(null,268))})),C=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(5),n.e(8)]).then(n.bind(null,269))})),N=Object(u.lazy)((function(){return n.e(7).then(n.bind(null,260))})),S=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,261))})),I=Object(u.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(11)]).then(n.bind(null,262))}));var M=function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(k,{}),Object(m.jsx)(u.Suspense,{fallback:Object(m.jsx)(z,{}),children:Object(m.jsx)("main",{children:Object(m.jsxs)(b.c,{children:[Object(m.jsx)(b.a,{path:"/",exact:!0,component:D}),Object(m.jsx)(b.a,{path:"/history",exact:!0,component:C}),Object(m.jsx)(b.a,{path:"/about",exact:!0,component:N}),Object(m.jsx)(b.a,{path:"/Login",exact:!0,component:S}),Object(m.jsx)(b.a,{path:"/Register",exact:!0,component:I})]})})}),Object(m.jsx)(L,{})]})},A=function(e){e&&e instanceof Function&&n.e(12).then(n.bind(null,263)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),r(e),i(e),o(e),a(e)}))};n(122);p.a.render(Object(m.jsx)(O.a,{children:Object(m.jsx)(M,{})}),document.getElementById("root")),A()},77:function(e,t,n){"use strict";n.d(t,"a",(function(){return H}));var r=n(0),i=n(19),o=n(33),a=n(34),c=n(6),s=(n(56),n(100)),u=n(2),l=n(24),p=n.n(l);p.a.init({appId:"XXzanHhs7rc8Bw0pFTQF4g4Y-MdYXbMMI",appKey:"uAoR3gnJHKgwioRznOHsXw7S",serverURL:"https://xxzanhhs.api.lncldglobal.com"});var b,f,j,O,h,y,g,d,m,v,w,x,U,P,k=function(e,t){var n=new l.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){return e(t)}),(function(e){return t(e)}))}))},F=function(e,t){var n=new l.User;return n.setUsername(e),n.setPassword(t),new Promise((function(r,i){n.logIn(e,t).then((function(e){return r(e)}),(function(e){return i(e)}))}))},L=function(){l.User.logOut()},z=function(){return l.User.current()},D=function(e,t){var n=new p.a.Object("Image"),r=new p.a.File(t,e);return n.set("fileName",t),n.set("owner",p.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){return e(t)}),(function(e){return t(e)}))}))},C=function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,i=void 0===r?10:r,o=new p.a.Query("Image");return o.include("owner"),o.limit(i),o.descending("createdAt"),o.skip(n*i),o.equalTo("owner",p.a.User.current()),new Promise((function(e,t){o.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},N=new(b=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"currentUser",f,this),Object(u.m)(this)}return Object(a.a)(e,[{key:"pullUser",value:function(){this.currentUser=z()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),f=Object(c.a)(b.prototype,"currentUser",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(b.prototype,"pullUser",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"pullUser"),b.prototype),Object(c.a)(b.prototype,"resetUser",[u.f],Object.getOwnPropertyDescriptor(b.prototype,"resetUser"),b.prototype),b),S=new(j=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"list",O,this),Object(i.a)(this,"isLoading",h,this),Object(i.a)(this,"hasMore",y,this),Object(i.a)(this,"page",g,this),this.limit=10,Object(u.m)(this)}return Object(a.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,C({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){return s.b.error("load data fail")})).finally((function(){return e.isLoading=!1}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}}]),e}(),O=Object(c.a)(j.prototype,"list",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=Object(c.a)(j.prototype,"isLoading",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),y=Object(c.a)(j.prototype,"hasMore",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),g=Object(c.a)(j.prototype,"page",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(c.a)(j.prototype,"append",[u.f],Object.getOwnPropertyDescriptor(j.prototype,"append"),j.prototype),Object(c.a)(j.prototype,"find",[u.f],Object.getOwnPropertyDescriptor(j.prototype,"find"),j.prototype),Object(c.a)(j.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(j.prototype,"reset"),j.prototype),j),I=(n(107),new(d=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"fileName",m,this),Object(i.a)(this,"file",v,this),Object(i.a)(this,"isLoading",w,this),Object(i.a)(this,"serverFile",x,this),Object(u.m)(this)}return Object(a.a)(e,[{key:"setFileName",value:function(e){this.fileName=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upLoader",value:function(){var e=this;return this.isLoading=!0,this.serverFile=null,new Promise((function(t,n){D(e.file,e.fileName).then((function(n){e.serverFile=n,t(n)})).catch((function(e){return n(e)})).finally((function(){return e.isLoading=!1}))}))}},{key:"reset",value:function(){this.isLoading=!1,this.serverFile=null}}]),e}(),m=Object(c.a)(d.prototype,"fileName",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=Object(c.a)(d.prototype,"file",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=Object(c.a)(d.prototype,"isLoading",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=Object(c.a)(d.prototype,"serverFile",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(c.a)(d.prototype,"setFileName",[u.f],Object.getOwnPropertyDescriptor(d.prototype,"setFileName"),d.prototype),Object(c.a)(d.prototype,"setFile",[u.f],Object.getOwnPropertyDescriptor(d.prototype,"setFile"),d.prototype),Object(c.a)(d.prototype,"upLoader",[u.f],Object.getOwnPropertyDescriptor(d.prototype,"upLoader"),d.prototype),Object(c.a)(d.prototype,"reset",[u.f],Object.getOwnPropertyDescriptor(d.prototype,"reset"),d.prototype),d)),M=new(U=function(){function e(){Object(o.a)(this,e),Object(i.a)(this,"values",P,this),Object(u.m)(this)}return Object(a.a)(e,[{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){F(e.values.username,e.values.password).then((function(e){N.pullUser(),t(e)})).catch((function(e){N.resetUser(),s.b.error("fail to login, please check username and password"),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){k(e.values.username,e.values.password).then((function(e){N.pullUser(),t(e)})).catch((function(e){N.resetUser(),s.b.error("fail to register, username already exist"),n(e)}))}))}},{key:"logout",value:function(e){L(),N.resetUser(),S.reset(),I.reset()}}]),e}(),P=Object(c.a)(U.prototype,"values",[u.n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"aaron",password:""}}}),Object(c.a)(U.prototype,"setUsername",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"setUsername"),U.prototype),Object(c.a)(U.prototype,"setPassword",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"setPassword"),U.prototype),Object(c.a)(U.prototype,"login",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"login"),U.prototype),Object(c.a)(U.prototype,"register",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"register"),U.prototype),Object(c.a)(U.prototype,"logout",[u.f],Object.getOwnPropertyDescriptor(U.prototype,"logout"),U.prototype),U),A=Object(r.createContext)({AuthStore:M,UserStore:N,ImageStore:I,HistoryStore:S}),H=function(){return Object(r.useContext)(A)}}},[[123,3,4]]]);
//# sourceMappingURL=main.5b7c6a46.chunk.js.map